<div style="display: none;">
	<link rel="stylesheet"
		href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/smoothness/jquery-ui.css" />
	<script
		src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	<script
		src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.js"></script>
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.2.7/raphael.min.js"></script>
	<script
		src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
		integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
		crossorigin="anonymous"></script>
	<link rel="stylesheet"
		href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
	<link rel="stylesheet"
		href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
		integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
		crossorigin="anonymous" />
	<style type="text/css">
#ia-image-canvas {
	position: absolute;
	z-index: 3;
}

/* line 6, sass/images.scss */
#ia-image-canvas svg {
	width: 100%;
	height: 100%;
}

/* line 10, sass/images.scss */
.ia-media-img {
	position: relative;
	overflow: scroll;
	z-index: 2;
	margin: 0px;
}

/* line 17, sass/images.scss */
.ia-image-container {
	position: relative;
	overflow: auto;
	max-height: 768px;
	padding: 0px;
}
</style>
</div>
<section class="container" id="Other"
	style="margin-bottom: 15px; padding: 10px 10px; font-family: Verdana, Geneva, sans-serif; color: #333333; font-size: 0.9em;">
	<div class="row col-xs-12 col-md-12">
		<!-- Instructions -->
		<div class="panel panel-primary">
			<div class="panel-heading">
				<strong>Instructions</strong>
			</div>

			<div class="panel-body">
				<p>Draw a polygon around each object that matches the search
					criteria &quot;${objects_to_find}&quot;</p>

				<ul>
					<li>Try to draw the polygon as close to the person's outline
						as possible</li>
					<li>To draw the polygon, click on the polygon button <i
						class="fa fa-share-alt"></i>(or press "p") and then clicking on
						the image will keep adding points to the polygon until you click
						on the starting point to complete the annotation
					</li>
					<li>To delete wrong annotation click on the remove button <i
						class="fa fa-eraser"></i> (or press "d") and click on the
						annotation that you want to remove.
					</li>
					<li>To remove the last added point while making an annotation,
						click on the remove last point button <i class="fa fa-arrow-left">
							(or press "Esc")</i>
					</li>
					<li>You can also zoom in or out the image by clicking the <i
						class="fa fa-search-plus"></i>or <i class="fa fa-search-minus"></i>
						buttons, or pressing (+ or -)
					</li>
				</ul>

				<p>When you are done with your annotations click the submit
					button</p>
			</div>
		</div>
	</div>
</section>
<div class="col-lg-7">
	<div class="row" id="annotation-controls">
		<div class="col-md-12">
			<div class="col-md-12">
				<div class="row">
					<div class="btn-group btn-group" data-toggle="buttons-radio">
						<a class="btn btn-default" 
							id="annotation-polygon-button" href="#" title="polygon (p)"><i
							class="fa fa-share-alt"></i></a> <a class="btn btn-default"
							
							id="annotation-remove-polygon-button" href="#"
							title="remove polygon (d)"><i class="fa fa-eraser"></i></a>
					</div>
					<div class="btn">
						<a class="btn btn-default" 
							id="annotation-remove-last-point-button" href="#"
							title="remove last point(ESC)"><i class="fa fa-arrow-left"></i></a>
					</div>

					<div class="btn-group btn-group">
						<a class="btn btn-default" 
							id="annotation-zoom-in-button" href="#" title="zoom in (+)"><i
							class="fa fa-search-plus"></i></a> <a class="btn btn-default"
							id="annotation-zoom-out-button"
							href="#" title="zoom out (-)"><i class="fa fa-search-minus"></i></a>
					</div>
				</div>
				<div class="row">
					<div id="preview"></div>
					<div class="ia-media-preview">

						<div class="ia-image-container">
							<div id="ia-image-canvas" style=""></div>
							<img class="ia-media-img" src="${image_url}" alt="test"
								title="test" />
						</div>

					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="col-lg-3">
	<div class="row">
		<div class="text-center alert" id="alert-text"></div>
	</div>
	<div class="row" style="display: inline-block; vertical-align: top;">
		<p id="button_paragraph">
			<input id="annotation_data" name="annotation_data" type="hidden" />

			<input class="btn btn-danger" id="reset_button" type="reset" />
		</p>
	</div>

</div>
<script type="text/javascript">
	(function() {
		var Annotation = (function() {
			function Annotation() {
				this.color = Annotation.getRandomColor();
				this.polygon = new Array();
				this.type = null;
				this.id = null;
				this.isClosed = false;
			}

			Annotation.prototype.addPoint = function(x, y) {
				this.polygon.push(x);
				this.polygon.push(y);
			};

			Annotation.prototype.getPointAt = function(index) {
				if (this.polygon.length > 2 * index + 1)
					return {
						x : this.polygon[2 * index],
						y : this.polygon[2 * index + 1]
					};
			};

			Annotation.prototype.getPolygonLength = function() {
				return this.polygon.length / 2;
			};

			Annotation.prototype.removeLastPoint = function() {
				if (this.polygon.length > 0)
					return {
						y : this.polygon.pop(),
						x : this.polygon.pop()
					};
				else
					return null;
			};

			Annotation.prototype.getPolygon = function() {
				return this.polygon;
			};

			Annotation.prototype.setType = function(type) {
				this.type = type;
			};

			Annotation.prototype.getType = function() {
				return this.type;
			};

			Annotation.prototype.setId = function(id) {
				this.id = id;
			};

			Annotation.prototype.getId = function() {
				return this.id;
			};

			Annotation.getRandomColor = function() {
				var letters = '0123456789ABCDEF'.split('');
				var color = '#';
				for (var i = 0; i < 6; i++) {
					color += letters[Math.round(Math.random() * 15)];
				}

				return color;
			};

			return Annotation;
		})();

		this.Annotations = (function() {
			function Annotations(imageId, savedAnnotations, options) {
				this.imageId = imageId;
				this.page = null;
				this.annotations = savedAnnotations;
				this.bind__onPolygonButtonClick = this.onPolygonButtonClick
						.bind(this);
				this.bind__onRemovePolygonButtonClick = this.onRemovePolygonButtonClick
						.bind(this);
				this.bind__onRemoveLastPointButtonClick = this.onRemoveLastPointButtonClick
						.bind(this);

				this.bind__onZoomInButtonClick = this.onZoomInButtonClick
						.bind(this);
				this.bind__onZoomOutButtonClick = this.onZoomOutButtonClick
						.bind(this);
				this.bind__polygonMouseClickListener = this.polygonMouseClickListener
						.bind(this);
				this.bind__polygonMouseMoveListener = this.polygonMouseMoveListener
						.bind(this);
				this.isFirstPoint = true;
				this.imageDimensions = {};
				this.tempLine = null;
				this.currentId = 0;
				this.onchange = options.onchange;
				this.currentAnnotationType = options.labels;
			}
			;

			Annotations.prototype.setCanvasElement = function(canvasId) {
				this.canvasId = canvasId;
				this.canvasElement = $("#" + canvasId);
				this.imageElement = this.canvasElement.next('.ia-media-img');
				this.canvasElement.width(this.imageElement.width());
				this.canvasElement.height(this.imageElement.height());
				this.canvas = new Raphael(canvasId, this.imageElement.width(),
						this.imageElement.height());
				this.imageDimensions.width = this.imageElement.width();
				this.imageDimensions.height = this.imageElement.height();
				this.canvas.setViewBox(0, 0, this.imageElement.width(),
						this.imageElement.height(), true);
				this.ratio = this.imageElement.height()
						/ this.imageElement.parent().height();
				this.setZoomScale(1 / this.ratio);
				console.log(this.ratio);
			};

			/**
			 * ui element event bindings in order of appearance
			 * 
			 * @param {number}
			 *            page
			 */
			Annotations.prototype.bindUIEvents = function() {
				$("#annotation-polygon-button").on("click",
						this.bind__onPolygonButtonClick);
				$("#annotation-remove-polygon-button").on("click",
						this.bind__onRemovePolygonButtonClick);
				$("#annotation-remove-last-point-button").on("click",
						this.bind__onRemoveLastPointButtonClick);
				$("#annotation-zoom-in-button").on("click",
						this.bind__onZoomInButtonClick);
				$("#annotation-zoom-out-button").on("click",
						this.bind__onZoomOutButtonClick);

				var instance = this;
				// Add the initial annotations
				for (var iterator = 0; iterator < this.annotations.length; iterator++) {
					var annotation = this.annotations[iterator];
					var point = annotation.getPointAt(0);
					var polygonString = "M" + point.x + "," + point.y;
					for (var i = 1; i < annotation.getPolygonLength(); i++) {
						var point = annotation.getPointAt(i);
						polygonString += "L" + point.x + "," + point.y;
					}
					polygonString += "Z";
					var polygon = this.canvas.path(polygonString);
					polygon.id = this.currentId;
					this.currentId++;
					annotation.setId(polygon.id);
					polygon.attr("fill", annotation.color);
					polygon.attr("fill-opacity", 0.1);
					polygon.attr("stroke", annotation.color);
					polygon.attr("stroke-width", 3 * this.ratio);
					this.appendAnnotation(annotation);
				}
				this.setPolygonHoverStates();

				$(document).keyup(function(e) {
					if (e.keyCode == 27) { // escape key maps to keycode `27`
						$("#annotation-remove-last-point-button").click();
					}
				});

				$(document).keypress(
						function(e) {
							var number = e.which - 48;
							// console.log(e.which);
							if (e.which == 80 || e.which == 112) // p
							{
								$("#annotation-polygon-button").click();
							} else if (e.which == 68 || e.which == 100) // d
							{
								$("#annotation-remove-polygon-button").click();
							} else if (e.which == 61 || e.which == 43) // =
							{
								$("#annotation-zoom-in-button").click();
							} else if (e.which == 45) // -
							{
								$("#annotation-zoom-out-button").click();
							}
							if ($('a[name=annotation-type-button][data-number='
									+ number + ']').length < 11) {
								$(
										'a[name=annotation-type-button][data-number='
												+ number + ']').each(
										function() {
											if (e.which - 48 == $(this).data(
													'number')) {
												$(this).click();
											}
										});
							}
						});

				$('a[name=annotation-type-button]')
						.on(
								"click",
								function(e) {
									e.preventDefault();
									var button = $(e.target);
									if (!$(button).is('a'))
										button = $(button).parent();
									button = button.eq(0);
									if (!button.hasClass('active')) {
										instance.currentAnnotationType = button
												.attr('data-val');
										instance.clearAlertMessage();
										$('#alert-text').addClass('alert-info');
										$('#alert-text')
												.html(
														"Annotating : "
																+ $(
																		'a[name=annotation-type-button][data-val='
																				+ instance.currentAnnotationType
																				+ ']')
																		.eq(0)
																		.data(
																				'name'));
										button.siblings().removeClass('active');
										if (instance.needsSubmitting) {
											button.siblings().removeClass(
													'alert');
											button.siblings().removeClass(
													'alert-danger');
											button.removeClass('alert');
											button.removeClass('alert-danger');
											button.parent()
													.removeClass('alert');
											button.parent().removeClass(
													'alert-danger');
											instance.clearAlertMessage();
											instance.submitLastAnnoatation();
										}
									} else {
										button.removeClass('active');
									}
								});
			};
			Annotations.prototype.clearAlertMessage = function() {
				$('#alert-text').removeClass('alert-danger');
				$('#alert-text').removeClass('alert-info');
				$('#alert-text').removeClass('alert-success');
				$('#alert-text').html("");
			};

			Annotations.prototype.appendAnnotation = function(annotation) {
				var instance = this;
				var tableElement = $('.ia-annotation-table tbody');
				var row = $("<tr data-val=" + annotation.getId() + "></tr>");
				var col1 = '<td><div class="text-center"><a class="btn btn-danger btn-xs annotation-type-delete" href="#" data-val="'
						+ annotation.getId()
						+ '"> <i class="fa fa-trash-o"></i></a></div></td>';
				var annotationName = $(
						'a[name=annotation-type-button][data-val='
								+ annotation.getType() + ']').eq(0)
						.data('name');
				var col2 = '<td><div data-val=' + annotation.getId() + '>'
						+ annotationName + '</div></td>';
				row.html(col1 + col2);
				row.hover(function() {
					instance.setAnnotationHighlighted(annotation, true);
				}, function() {
					instance.setAnnotationHighlighted(annotation, false);
				});
				tableElement.append(row);
				$(
						'a.annotation-type-delete[data-val='
								+ annotation.getId() + ']').eq(0).on('click',
						function(e) {
							e.preventDefault();
							instance.deleteAnnotation(annotation);
						});
				var polygon = this.canvas.getById(annotation.getId());
				$(polygon).data('annotation', annotation);
			};

			Annotations.prototype.setAnnotationHighlighted = function(
					annotation, highlighted) {
				var polygon = this.canvas.getById(annotation.getId());
				var tableElement = $('.ia-annotation-table tbody');
				var row = tableElement.children(
						'[data-val=' + annotation.getId() + ']').eq(0);
				if (highlighted) {
					polygon.attr("fill-opacity", 0.8);
					row.addClass('active');
				} else {
					polygon.attr("fill-opacity", 0.1);
					row.removeClass('active');
				}
			};

			Annotations.prototype.deleteAnnotation = function(annotation) {
				var instance = this;
				var index = $.inArray(annotation, instance.annotations);
				if (index != -1) {
					instance.annotations.splice(index, 1);
					var polygon = instance.canvas.getById(annotation.getId());
					polygon.unmouseout();
					polygon.unmouseover();
					polygon.unclick();
					polygon.remove();
					this.onchange(this.annotations);
				} else {
					instance.clearAlertMessage();
					$('#alert-text').addClass('alert-danger');
					$('#alert-text').html("Could not remove annotation");
				}

			}

			Annotations.prototype.onPolygonButtonClick = function(e) {
				e.preventDefault();
				var button = $(e.target);
				if (!$(button).is('a'))
					button = $(button).parent();
				button = button.eq(0);
				if (!button.hasClass('active')) {
					// console.log("Not active polygonButton");
					this.clearAlertMessage();
					this.resetPolygonStates();
					$('#alert-text').addClass('alert-info');
					$('#alert-text').html(
							"Currently annotating: "
									+ this.currentAnnotationType);
					this.canvasElement.css('cursor', 'crosshair');
					button.siblings().removeClass('active');
					this.canvasElement.on("click",
							this.bind__polygonMouseClickListener);
					button.effect('highlight');
					var annotation = this.annotations[this.annotations.length - 1];
					if (annotation != null && !annotation.isClosed) {
						this.canvasElement.on("mousemove",
								this.bind__polygonMouseMoveListener);
					}
				} else {
					this.resetPolygonStates();
					this.setPolygonHoverStates();
				}
				console.log("Polygon");
			};

			Annotations.prototype.resetPolygonStates = function() {
				this.canvasElement.off("click",
						this.bind__polygonMouseClickListener);
				this.canvasElement.off("mousemove",
						this.bind__polygonMouseMoveListener);
				this.canvasElement.css('cursor', '');
				for (i in this.annotations) {
					var polygon = this.canvas.getById(this.annotations[i]
							.getId());
					polygon.attr('cursor', '');
					polygon.unclick();
					polygon.unmouseover();
					polygon.unmouseout();
				}
			}

			Annotations.prototype.setPolygonHoverStates = function() {
				for (i in this.annotations) {
					var polygon = this.canvas.getById(this.annotations[i]
							.getId());
					polygon.attr('cursor', 'pointer');
					var instance = this;
					polygon.mouseover(function() {
						var annotation = $(this).data('annotation');
						instance.setAnnotationHighlighted(annotation, true);
					});
					polygon.mouseout(function() {
						var annotation = $(this).data('annotation');
						instance.setAnnotationHighlighted(annotation, false);
					});
				}
			}

			Annotations.prototype.submitLastAnnoatation = function() {
				if (typeof this.currentAnnotationType == "undefined") {
					$('a[name=annotation-type-button]').addClass('alert');
					$('a[name=annotation-type-button]')
							.addClass('alert-danger');
					$('a[name=annotation-type-button]').eq(0).parent()
							.addClass('alert');
					$('a[name=annotation-type-button]').eq(0).parent()
							.addClass('alert-danger');
					this.clearAlertMessage();
					$('#alert-text').addClass('alert-danger');
					$('#alert-text')
							.html(
									"Select an annotation on the left in order to submit!");
					return;

				}
				var instance = this;
				this.clearAlertMessage();
				this.needsSubmitting = false;

				var annotation = this.annotations[this.annotations.length - 1];
				annotation.type = this.currentAnnotationType;
				annotation.isClosed = true;
				instance.appendAnnotation(annotation);

				this.onchange(this.annotations);

			};

			Annotations.prototype.polygonMouseClickListener = function(e) {
				if (this.needsSubmitting)
					return;
				// console.log("click");
				var offset = $(this.canvasElement).offset();
				var coords = {
					x : Math.round((e.pageX - offset.left) / this.scale),
					y : Math.round((e.pageY - offset.top) / this.scale)
				};

				if (this.isFirstPoint) {
					var instance = this;
					this.canvasElement.on("mousemove",
							this.bind__polygonMouseMoveListener);

					var polygon = this.canvas.path("M" + coords.x + ","
							+ coords.y);
					polygon.id = this.currentId;
					// console.log(polygon.id);
					this.currentId++;
					this.tempLine = this.canvas.path("M" + coords.x + ","
							+ coords.y);
					var annotation = new Annotation();
					annotation.addPoint(coords.x, coords.y);
					annotation.setId(polygon.id);
					this.annotations.push(annotation);
					this.isFirstPoint = false;
					var circle = this.canvas.circle(coords.x, coords.y,
							8 * this.ratio);
					circle.id = "initialCircle";
					circle.hover(function() {
						circle.animate({
							fill : 'rgb(255,0,0)',
							opacity : 1
						}, 100, 'elastic')
					}, function() {
						circle.animate({
							fill : 'rgb(255,255,255)',
							opacity : 1
						}, 100, 'elastic');
					});
					circle.click(function(e) {
						e.stopPropagation();
						instance.canvasElement.off("click",
								instance.bind__polygonMouseClickListener);
						instance.canvasElement.off("mousemove",
								instance.bind__polygonMouseMoveListener);
						instance.tempLine.remove();
						var polygon = instance.canvas.getById(annotation
								.getId());
						polygon.attr('path', polygon.attr('path') + 'Z');
						polygon.attr("fill", annotation.color);
						polygon.attr("fill-opacity", 0.1);
						console.log("Annotation polygon closed");
						circle.remove();
						instance.needsSubmitting = true;
						instance.submitLastAnnoatation();

						instance.isFirstPoint = true;
						$("#annotation-polygon-button").click();

					});
					circle.attr("fill", "#FFFFFF");
					circle.attr("stroke", "#FF0000");
				} else {
					var annotation = this.annotations[this.annotations.length - 1];
					var polygon = this.canvas.getById(annotation.getId());
					annotation.addPoint(coords.x, coords.y);
					polygon.attr('path', polygon.attr('path') + "L" + coords.x
							+ "," + coords.y);
					polygon.toBack();
					polygon.attr("stroke", annotation.color);
					polygon.attr("stroke-width", 3 * this.ratio);

				}
			}

			Annotations.prototype.polygonMouseMoveListener = function(e) {
				if (this.needsSubmitting)
					return;
				var offset = $(this.canvasElement).offset();
				var coords = {
					x : Math.round((e.pageX - offset.left) / this.scale),
					y : Math.round((e.pageY - offset.top) / this.scale)
				};

				if (!this.isFirstPoint) {
					var annotation = this.annotations[this.annotations.length - 1];
					var lastPoint = annotation.getPointAt(annotation
							.getPolygonLength() - 1);
					this.tempLine.attr('path', 'M' + lastPoint.x + ','
							+ lastPoint.y + 'L' + coords.x + "," + coords.y);
					this.tempLine.toBack();
					this.tempLine.attr("stroke", annotation.color);
					this.tempLine.attr("stroke-width", 3 * this.ratio);
				}
			}

			Annotations.prototype.onRemovePolygonButtonClick = function(e) {
				var instance = this;
				e.preventDefault();
				this.clearAlertMessage();
				var button = $(e.target);
				if (!$(button).is('a'))
					button = $(button).parent();
				button = button.eq(0);
				if (!button.hasClass('active')) {
					this.clearAlertMessage();
					$('#alert-text').addClass('alert-info');
					$('#alert-text').html("Select annotation to delete");
					button.siblings().removeClass('active');
					// button.addClass('active');
					this.resetPolygonStates();
					this.setPolygonHoverStates();
					this.canvasElement.css('cursor', 'no-drop');
					for (i in this.annotations) {
						var annotation = this.annotations[i];
						var polygon = this.canvas.getById(this.annotations[i]
								.getId());
						polygon.attr('cursor', 'pointer');
						polygon.click(function() {
							var annotation = $(this).data('annotation');
							instance.deleteAnnotation(annotation);
						});
					}
					button.effect('highlight');

				} else {
					this.resetPolygonStates();
					this.setPolygonHoverStates();
				}
				console.log("Polygon Remove");
			};
			Annotations.prototype.onRemoveLastPointButtonClick = function(e) {
				var instance = this;
				e.preventDefault();
				var button = $(e.target);
				if (!$(button).is('a'))
					button = $(button).parent();
				button = button.eq(0);
				button.effect('highlight');
				if (!$("#annotation-polygon-button").hasClass('active')) {
					return;
				}
				var circle = this.canvas.getById("initialCircle");
				if (circle == null) {
					return;
				}
				var annotation = this.annotations[this.annotations.length - 1];
				var polygon = this.canvas.getById(annotation.getId());
				annotation.removeLastPoint();
				if (polygon.attr('path').length > 1) {
					var lastElement = polygon.attr('path').pop();
					polygon.attr('path', polygon.attr('path'));
				} else {
					instance.deleteAnnotation(annotation);
					var circle = this.canvas.getById("initialCircle");
					circle.remove()
					instance.tempLine.remove();
					instance.isFirstPoint = true;
				}

				console.log("Polygon Remove last point");
			};

			Annotations.prototype.onZoomInButtonClick = function(e) {
				e.preventDefault();
				var button = $(e.target);
				if (!$(button).is('a'))
					button = $(button).parent();
				button = button.eq(0);
				button.effect('highlight');
				this.setZoomScale(this.scale + 0.1);

				console.log("Zoom In");
			};

			Annotations.prototype.setZoomScale = function(scale) {
				if (scale <= 0.001)
					return;
				this.scale = scale;
				this.imageElement.width(Math.round(this.imageDimensions.width
						* this.scale));
				this.imageElement.height(Math.round(this.imageDimensions.height
						* this.scale));
				this.canvasElement.width(Math.round(this.imageDimensions.width
						* this.scale));
				this.canvasElement.height(Math
						.round(this.imageDimensions.height * this.scale));
			}

			Annotations.prototype.onZoomOutButtonClick = function(e) {
				e.preventDefault();
				var button = $(e.target);
				if (!$(button).is('a'))
					button = $(button).parent();
				button = button.eq(0);
				button.effect('highlight');
				this.setZoomScale(this.scale - 0.1);
				console.log("Zoom Out");
			};

			Annotations.prototype.clear_all = function(e) {
				var total = this.annotations.length;
				for (var iterator = 0; iterator < total; iterator++) {
					var annotation = this.annotations[0];
					this.deleteAnnotation(annotation)
				}
				this.currentId = 0;
				return this.onchange(this.annotations);
			};
			return Annotations;
		})();
	}).call(this);

	$(document)
			.ready(
					function() {

						var assignment_id = turkGetParam('assignmentId', "");
						// Initialize the bounding-box annotator.
						var savedAnnotations = new Array();
						var annotations = new Annotations(
								1,
								savedAnnotations,
								{
									labels : "person",
									onchange : function(entries) {
										// Input the text area on change. Use "hidden" input tag unless debugging.
										// <input id="annotation_data" name="annotation_data" type="hidden" />
										// $("#annotation_data").val(JSON.stringify(entries))
										$("#annotation_data").val(
												JSON.stringify(entries));
										if (entries.length > 0
												&& assignment_id != ""
												&& assignment_id != "ASSIGNMENT_ID_NOT_AVAILABLE") {
											$("#submitButton").removeAttr(
													"disabled");
										} else {
											$("#submitButton").attr("disabled",
													"disabled");
										}
									}
								});

						annotations.setCanvasElement('ia-image-canvas');
						annotations.bindUIEvents();

						$("#reset_button").click(function(e) {
							annotations.clear_all();
						});
						// Disable the submission at the beginning.
						$("#submitButton").attr("disabled", "disabled");
						$("#submitButton").detach().appendTo(
								"#button_paragraph");
						if (assignment_id == "ASSIGNMENT_ID_NOT_AVAILABLE") {
							$("#submitButton").val("This is preview");
						}
						console.log(assignment_id);

					});
</script>
